AWSTemplateFormatVersion: "2010-09-09"
Transform: "AWS::Serverless-2016-10-31"

Parameters:
  ProjectName:
    Type: String
    Description: "Name of the project"
    Default: hephaestus

Description: >
  Hephaestus Business Logic Layer

Resources:
  LambdasBusinessLogicLayer:
    Type: AWS::Serverless::LayerVersion
    Metadata:
      BuildMethod: makefile
    Properties:
      LayerName: !Sub "${ProjectName}"
      Description: "Hephaestus Business Logic Layer"
      ContentUri: ./
      CompatibleRuntimes:
        - python3.10
      LicenseInfo: "MIT"
      RetentionPolicy: Retain

Outputs:

  DependenciesLayerV5:
    Description: "Hephaestus Business Logic Layer with version 5"
    Value: !Sub "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:layer:${ProjectName}:5"
    Export:
        Name: !Sub "${ProjectName}-v5"
